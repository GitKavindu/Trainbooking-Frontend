 <!-- Modal -->
  <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-xl" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">{{ModalTitle}}</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close" (click)="closeClick()">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
            <app-add-edit-apartment  *ngIf="ActivateAddEditApartmentComp==true" [Apartment]="Apartment"></app-add-edit-apartment>
        </div>
        
      </div>
    </div>
  </div>
  
<div class="container-lg mt-4 mb-4">
  <div class="card shadow border-primary">
      <div class="card-header bg-primary text-white d-flex align-items-center justify-content-between">
          <div>
              <i class="fas fa-subway mr-2"></i>
              <strong class="h5 mb-0">Apartments</strong>
          </div>
          <img src="images/icons/Apartment_2.svg" height="50" alt="Booking Icon">
      </div>

      <div class="card-body">
        <div class="mb-3 d-flex align-items-center justify-content-between">
            <span class="text-muted d-none d-lg-block" [innerHTML]="getTitleText()"></span>
            
            <div class="filters">

                <select id="filterType" title="Filter By:"  [(ngModel)]="ApartmentClassFilter" (change)="filterFn()">
                  <option value="All"  >All</option>
                  <option  *ngFor="let class of ApartmentClasses" value="{{class}}">{{class | uppercase}}</option>
                </select>
            </div>            

            <!-- Button trigger modal -->
            <button type="button" class="btn btn-primary float-right m-2" *ngIf="tokenService.getIsUserAdmin()==true"
              data-toggle="modal" data-target="#exampleModal" (click)="addClick()" data-backdrop="static" data-keyboard="false" >
                  Add Apartment
            </button>
        </div>

        <!-- On large screens -->
        <div class="table-responsive" *ngIf="deviceService.getScreenSize()>990">
            <table class="table table-hover table-bordered">
                <thead class="thead-light">
                    <tr class="text-center">
                        <th>
                          Apartment Id
                        </th>
                        <th>
                          Apartment Class
                        </th>
                        <th *ngIf="tokenService.getIsUserAdmin()==true">Created Date</th>
                        <th *ngIf="tokenService.getIsUserAdmin()==true">Last Updated</th>
                        <th *ngIf="tokenService.getIsUserAdmin()==false">Available seats</th>
                        <th *ngIf="tokenService.getIsUserAdmin()==false">Price</th>
                        <th colspan="2" *ngIf="tokenService.getIsUserAdmin()==true">Options</th>
                        <th colspan="1" *ngIf="tokenService.getIsUserAdmin()==false">Book</th>
                    </tr>
                </thead>

                <!-- <tbody *ngIf="loadingBit==true || returnedUsers==undefined || returnedUsers.length==0">
                  <tr>
                    <td colspan="6" class="text-center">{{getLabelTextWhenNotHavingUsers()}}</td>
                  </tr>
                </tbody> -->

                <tbody *ngIf="ApartmentList!=undefined && ApartmentList.length!=0">                      
                    <ng-container *ngFor="let dataItem of getVisibleRows()">
                          <tr class="table-row text-center">
                              <td>{{getApartmentId(dataItem.Apartment_id)}}</td>
                              <td>
                                <strong>{{ dataItem.ApartmrntClass}}</strong><br>
                              </td>
                              <td *ngIf="tokenService.getIsUserAdmin()==false"> {{ getAvailableSeatCount(dataItem.seatModel) }} </td>
                              <td *ngIf="tokenService.getIsUserAdmin()==false">$50.00</td>
                              <td *ngIf="tokenService.getIsUserAdmin()==true">{{dataItem.created_date}}</td>
                              <td *ngIf="tokenService.getIsUserAdmin()==true && dataItem.lastUpdated_date==null"> ---------------</td>
                              <td *ngIf="tokenService.getIsUserAdmin()==true && dataItem.lastUpdated_date!=null">{{ dataItem.lastUpdated_date }}</td>

                              <td class="text-center" *ngIf="tokenService.getIsUserAdmin()==true">
                                  <button type="button" class="btn btn-light mr-1"
                                      data-toggle="modal" data-target="#exampleModal" (click)="editClick(dataItem)" data-backdrop="static" data-keyboard="false">
                                      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-pencil-fill" viewBox="0 0 16 16">
                                        <path d="M12.854.146a.5.5 0 0 0-.707 0L10.5 1.793 14.207 5.5l1.647-1.646a.5.5 0 0 0 0-.708zm.646 6.061L9.793 2.5 3.293 9H3.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.207zm-7.468 7.468A.5.5 0 0 1 6 13.5V13h-.5a.5.5 0 0 1-.5-.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.5-.5V10h-.5a.5.5 0 0 1-.175-.032l-.179.178a.5.5 0 0 0-.11.168l-2 5a.5.5 0 0 0 .65.65l5-2a.5.5 0 0 0 .168-.11z"/>
                                      </svg>
                                  </button>
                              </td>
                              <td class="text-center" *ngIf="tokenService.getIsUserAdmin()==true">
                                  <button type="button" class="btn btn-light mr-1" (click)="deleteClick(dataItem.Apartment_id)">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-trash" viewBox="0 0 16 16">
                                      <path d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0z"/>
                                      <path d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4zM2.5 3h11V2h-11z"/>
                                    </svg>
                                  </button>
                              </td>

                              <td class="text-center" *ngIf="tokenService.getIsUserAdmin()==false">
                                  <button type="button" class="btn btn-light mr-1"
                                      data-toggle="modal" data-target="#exampleModal" (click)="bookClick(dataItem)" data-backdrop="static" data-keyboard="false">
                                      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-book" viewBox="0 0 16 16">
                                        <path d="M1 2.828c.885-.37 2.154-.769 3.388-.893 1.33-.134 2.458.063 3.112.752v9.746c-.935-.53-2.12-.603-3.213-.493-1.18.12-2.37.461-3.287.811zm7.5-.141c.654-.689 1.782-.886 3.112-.752 1.234.124 2.503.523 3.388.893v9.923c-.918-.35-2.107-.692-3.287-.81-1.094-.111-2.278-.039-3.213.492zM8 1.783C7.015.936 5.587.81 4.287.94c-1.514.153-3.042.672-3.994 1.105A.5.5 0 0 0 0 2.5v11a.5.5 0 0 0 .707.455c.882-.4 2.303-.881 3.68-1.02 1.409-.142 2.59.087 3.223.877a.5.5 0 0 0 .78 0c.633-.79 1.814-1.019 3.222-.877 1.378.139 2.8.62 3.681 1.02A.5.5 0 0 0 16 13.5v-11a.5.5 0 0 0-.293-.455c-.952-.433-2.48-.952-3.994-1.105C10.413.809 8.985.936 8 1.783"/>
                                      </svg>
                                  </button>
                              </td>

                          </tr>                         
                      
                    </ng-container>
                </tbody>
            </table>
        </div>

        <!-- On small screens -->
        <ng-container *ngIf="deviceService.getScreenSize()<=990">
          
          <ng-container *ngIf="ApartmentList!=undefined && ApartmentList.length!=0">
              <div class="row thead-custom">
                  <div class="col">
                      Apartment Details
                  </div>
              </div>
              
              <br>
              <div *ngFor="let dataItem of getVisibleRows();let i=index">

                  <div class="row">
                      <div class="col-2 toggle-container">
                              <input type="checkbox" id="toggle{{i}}" class="toggle-checkbox" [checked]="dataItem.showRow" (click)="toggleMoreDetails(i)">
                              <label for="toggle{{i}}" class="toggle-button"></label>
                      </div>
                      <div class="col-10">
                          {{dataItem.ApartmrntClass | uppercase}}
                      </div>               
                  </div>
                  
                  <ng-container *ngIf="dataItem.showRow==true">
                    <!-- Apartment Id -->
                    <div class="row py-3 border-bottom text-left">
                      <div class="col-6 text-muted ">Apartment Id:</div>
                      <div class="col-6 ">{{ getApartmentId(dataItem.Apartment_id) }}</div>
                    </div>

                    <!-- Created date -->
                    <div class="row py-3 border-bottom text-left">
                      <div class="col-6 text-muted text-left">Created date:</div><br> 
                      <div class="col-6 text-left">{{ dataItem.created_date }}</div>
                    </div>

                    <!-- Updated date -->
                    <div class="row py-3 border-bottom text-left">
                      <div class="col-6 text-muted text-left">Updated date:</div><br> 
                      <div class="col-6 text-left" *ngIf="dataItem.lastUpdated_date==null">( Not Updated )</div>
                      <div class="col-6 text-left" *ngIf="dataItem.lastUpdated_date!=null">{{ dataItem.lastUpdated_date }} </div>
                    </div>

                    <div class="d-flex mt-3 align-items-center">

                      <ng-container *ngIf="tokenService.getIsUserAdmin()==true">
                          <!-- Edit Button-->
                          <div  class="mr-3"> 
                            <button class="col-12 btn btn-outline-success mr-2"  
                                data-toggle="modal" data-target="#exampleModal" (click)="editClick(dataItem)" data-backdrop="static" data-keyboard="false">
                              Edit Apartment
                            </button>
                          </div>

                          <!-- Delete Button-->
                          <div  class="mr-3"> 
                            <button class="col-12 btn btn-outline-danger mr-2"  (click)="deleteClick(dataItem)">
                              Delete Apartment
                            </button>
                          </div>
                      </ng-container>

                      <ng-container *ngIf="tokenService.getIsUserAdmin()==false">
                          <!-- Book Button-->
                          <div  class="mr-3"> 
                            <button class="col-12 btn btn-outline-success mr-2"  
                                data-toggle="modal" data-target="#exampleModal" (click)="bookClick(dataItem)" data-backdrop="static" data-keyboard="false">
                              Book Seats
                            </button>
                          </div>
                      </ng-container>

                    </div>
                    
                    <br>
                  </ng-container>                 
                  <hr>
            
              </div>
          </ng-container>
          
        </ng-container>

          <!-- âœ… Styled Pagination Below Table -->
          <nav aria-label="Page navigation" *ngIf="ApartmentList!=undefined && ApartmentList.length!=0">
              <ul class="pagination justify-content-end mt-4 mb-0">
                  <li class="page-item" [class.disabled]="navigationService.selectedPage === 1" id="prev">
                      <button class="page-link" tabindex="-1" (click)="pageBackward()" [disabled]="navigationService.selectedPage==1">Previous</button>
                  </li>
                  <li class="page-item active disabled">
                      <a class="page-link">{{navigationService.selectedPage}}</a>
                  </li>
                  <li class="page-item" id="next" [class.disabled]="navigationService.selectedPage === navigationService.getMaxPageNumber()">
                      <button class="page-link" (click)="pageForward()" [disabled]="navigationService.selectedPage==navigationService.getMaxPageNumber()">Next</button>
                  </li>
              </ul>
          </nav>

      </div>
  </div>
</div>

